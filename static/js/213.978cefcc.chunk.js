"use strict";(self.webpackChunkbasic=self.webpackChunkbasic||[]).push([[213],{9213:function(e,a,n){n.r(a),n.d(a,{default:function(){return U}});var t=n(6871),r="/breaking-bad-app/all-characters",s="/breaking-bad-app/details/:id",i="/breaking-bad-app/episodes",c="/breaking-bad-app",l="/breaking-bad-app/votes",o=n(3168),d=n(184),u=function(){var e=(0,o.$)("languages"),a=e.t,n=e.i18n,t=localStorage.getItem("language")?localStorage.getItem("language"):"en",r=function(e){console.log(e),localStorage.setItem("language",e),n.changeLanguage(e)},s=a("english");return(0,d.jsx)("div",{className:"footer",children:(0,d.jsxs)("p",{children:["Breaking Bad with React - Anartz Mugika Ledo -","  ",(new Date).getUTCFullYear()," "," /   ".concat(a("label")," "),(0,d.jsx)("button",{className:"langs-link ".concat("en"===t?"active":"en"),onClick:function(){return r("en")},children:s})," ",(0,d.jsx)("button",{className:"langs-link ".concat("es"===t?"active":"es"),onClick:function(){return r("es")},children:a("spanish")})," ",(0,d.jsx)("button",{className:"langs-link ".concat("eu"===t?"active":"eu"),onClick:function(){return r("eu")},children:a("basque")})]})})},h=n(9439),x=n(2791),m=function(e){var a=(0,x.useState)({data:null,loading:!0,error:null}),n=(0,h.Z)(a,2),t=n[0],r=n[1],s=(0,x.useRef)(!0);return(0,x.useEffect)((function(){return function(){s.current=!1}}),[]),(0,x.useEffect)((function(){(function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return{loading:!1,error:null,data:e}})).catch((function(e){return{loading:!1,error:e,data:[]}}))})(e).then((function(e){s.current?r({loading:!1,error:null,data:e.data}):console.log("Ha dejado de renderizar")}))}),[e]),t},j=n(9881),g=n(1174),p=function(){return(0,d.jsx)("span",{className:"loading",children:(0,d.jsx)(g.FM,{size:454})})},v=function(e){var a=e.title;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("h2",{children:a}),(0,d.jsx)("hr",{})]})},b=function(){var e=(0,o.$)("episodes").t,a=m("".concat(j.iL).concat(j.Pn.EPISODES)),n=a.loading,t=a.data;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{title:e("title")}),n&&(0,d.jsx)(p,{}),!n&&(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"table",children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:["season","episode","title_table","air_date","characters"].map((function(a){return(0,d.jsx)("th",{className:"text-center",children:e(a)},a.toLowerCase())}))})}),(0,d.jsx)("tbody",{children:t.map((function(e,a){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.season}),(0,d.jsx)("td",{children:e.episode}),(0,d.jsx)("td",{children:e.title}),(0,d.jsx)("td",{children:e.air_date}),(0,d.jsx)("td",{children:e.characters.join(", ")})]},a)}))})]})})]})},f=n(3504),N=function(){var e=(0,o.$)("navbar").t;return(0,d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top",children:(0,d.jsxs)("div",{className:"container-fluid",children:[(0,d.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,d.jsx)("span",{className:"navbar-toggler-icon"})}),(0,d.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01",children:[(0,d.jsx)(f.OL,{to:c,className:"navbar-brand",children:"Breaking Bad"}),(0,d.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(f.OL,{to:c,className:function(e){return e.isActive?"nav-link active":"nav-link"},children:e("home")})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(f.OL,{to:r,className:function(e){return e.isActive?"nav-link active":"nav-link"},children:e("characters")})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(f.OL,{to:i,className:function(e){return e.isActive?"nav-link active":"nav-link"},children:e("episodes")})}),(0,d.jsx)("li",{className:"nav-item",children:(0,d.jsx)(f.OL,{to:l,className:function(e){return e.isActive?"nav-link active":"nav-link"},children:e("votes")})})]})]})]})})},k=n(4467),_=n(1500);_.kL.register(_.uw,_.f$,_.ZL,_.Dx,_.u,_.De);var w,C,L,F,$,Z=function(e){var a={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:e.titleChart}}},n={labels:e.labels,datasets:[{label:"Characters",data:e.dataValues,backgroundColor:"rgba(13, 202, 240, 1)"}]};return(0,d.jsx)(k.$Q,{options:a,data:n})},y=function(e){var a=e.label,n=e.param,t=e.action;return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("button",{className:"btn btn-info btn-lg btn-block custom-button",onClick:function(){return t(n)},children:a})})},A=function(e){return window.open(e,"_blank")},D=function(e){var a=e.character,n=e.useLabel,t=void 0===n?"M\xe1s":n;return(0,d.jsx)("div",{className:"col",children:(0,d.jsxs)("div",{className:"card",children:[(0,d.jsxs)("div",{className:"image-section",children:[(0,d.jsx)("img",{src:a.img,className:"card-img-top",alt:a.name}),(0,d.jsx)("span",{className:"bottom-left",children:a.portrayed})]}),(0,d.jsxs)("div",{className:"card-body",children:[(0,d.jsx)("h5",{className:"card-title",children:a.name}),void 0===a.char_id?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"card-text truncate",children:a.description}),(0,d.jsx)(y,{label:t,param:a.url,action:function(e){return A(e)}},"Wiki_".concat(a.id))]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:"card-text",children:a.occupation.join(", ")}),(0,d.jsx)("p",{className:"card-text",children:(0,d.jsxs)("small",{className:"text-muted",children:[t," ",a.appearance.join(", ")]})})]})]})]})},a.char_id)},E=function(){var e=(0,o.$)("characters").t,a=m("".concat(j.iL).concat(j.Pn.CHARACTERS)),n=a.loading,t=a.data;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{title:e("title")}),n&&(0,d.jsx)(p,{}),!n&&(0,d.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-4",children:t.map((function(a,n){return(0,d.jsx)(D,{character:a,useLabel:e("appearance_seasons")},n)}))})]})},S=n(2336),P=n(4376),O=n(5450),W=n(168),I=n(7570),V=(0,I.Ps)(w||(w=(0,W.Z)(["\n  query PrincipalCharsVotes {\n    characters {\n      id\n      name\n      description\n      portrayed: actor\n      total_episodes\n      votes\n      url\n      img: photo\n    }\n  }\n"]))),T=(0,I.Ps)(C||(C=(0,W.Z)(["\n  query detailsCharacter($id: ID!){\n    character(id: $id) {\n      id\n      total_episodes\n      votes\n      name\n      actor\n      description\n      photo\n      url\n    }\n  }\n"]))),B=(0,I.Ps)(L||(L=(0,W.Z)(["\n  subscription {\n    changeVotes {\n      id\n      name\n      votes\n    }\n  }\n"]))),M=(0,I.Ps)(F||(F=(0,W.Z)(["\n    subscription characterVoteCount($id: ID!) {\n        changeVote(id: $id) {\n            id\n            name\n            votes\n        }\n    }\n"]))),R=(0,I.Ps)($||($=(0,W.Z)(["\n  mutation Mutation($character: ID!) {\n    addVote(character: $character) {\n      status\n      message\n    }\n  }\n"]))),q=function(){var e=(0,o.$)("votes").t,a=(0,x.useState)([]),n=(0,h.Z)(a,2),t=n[0],r=n[1],s=(0,S.a)(V),i=s.loading,c=s.error,l=s.data,u=(0,P.D)(R,{update:function(e,a){console.log(a.data)}}),m=(0,h.Z)(u,1)[0];if((0,O.m)(B),(0,x.useEffect)((function(){l&&r(l.characters)}),[l]),i)return(0,d.jsx)(p,{});if(c)return(0,d.jsx)("p",{children:"Error :("});var j=[],g=[];i||t.map((function(e){return j.push(e.name),g.push(e.votes),""}));var b=function(e){return m({variables:{character:e}})};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{title:e("title")}),!i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-9",children:(0,d.jsx)(Z,{titleChart:e("vote_count_for_chart"),labels:j,dataValues:g})}),(0,d.jsx)("div",{className:"col d-grid gap-2",children:t.map((function(e){return(0,d.jsx)(y,{label:e.name,param:e.id,action:b},e.id)}))})]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("div",{className:"row",children:(0,d.jsx)("div",{className:"table-responsive",children:(0,d.jsxs)("table",{className:"table",children:[(0,d.jsx)("thead",{children:(0,d.jsx)("tr",{children:["name","actor","info","total_episodes","votes","details"].map((function(a,n){return(0,d.jsx)("th",{className:"text-center",children:e(a)},n)}))})}),(0,d.jsx)("tbody",{children:t.map((function(a){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:a.name}),(0,d.jsx)("td",{children:a.portrayed}),(0,d.jsx)("td",{children:(0,d.jsx)("a",{href:a.url,target:"_blank",rel:"noreferrer",children:"Wikipedia"})}),(0,d.jsx)("td",{children:a.total_episodes}),(0,d.jsx)("td",{children:a.votes}),(0,d.jsx)("td",{children:(0,d.jsx)(f.OL,{to:"/breaking-bad-app/details/".concat(a.id),className:"btn btn-info btn-lg btn-block custom-button",children:e("details")})})]},a.id)}))})]})})})]})]})},z=function(){var e=(0,o.$)("details").t,a=(0,x.useState)((0,t.UO)().id),n=(0,h.Z)(a,1)[0],r=(0,x.useState)({}),s=(0,h.Z)(r,2),i=s[0],c=s[1],l=(0,S.a)(T,{variables:{id:n}}),u=l.loading,m=l.error,j=l.data,g=(0,P.D)(R,{update:function(e,a){console.log(a.data)}}),b=(0,h.Z)(g,1)[0];(0,O.m)(M,{variables:{id:n}}),(0,x.useEffect)((function(){j&&c(j.character)}),[j]);return u?(0,d.jsx)(p,{}):m?(0,d.jsx)("p",{children:"Error :("}):(0,d.jsx)(d.Fragment,{children:i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{title:i.name}),(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-5",children:(0,d.jsx)("img",{className:"img-fluid",src:i.photo,alt:"".concat(i.name," profile")})}),(0,d.jsxs)("div",{className:"col-lg",children:[(0,d.jsxs)("h5",{className:"my-3",children:[i.votes," ",e("votes")]}),(0,d.jsx)("p",{children:i.description}),(0,d.jsx)(y,{label:"".concat(e("vote_lbl")," ").concat(i.name),param:i.id,action:function(e){return b({variables:{character:e}})}},i.id),"\xa0",(0,d.jsx)(y,{label:e("more_info"),param:i.url,action:function(e){return A(e)}},"Wiki_".concat(i.id))]})]})]})})},H=(n(3543),function(){var e=(0,o.$)("home").t,a=(0,S.a)(V),n=a.loading,t=a.error,r=a.data,s=!!r&&r.characters;return t?(0,d.jsx)("p",{children:"Error :("}):(0,d.jsxs)(d.Fragment,{children:[n&&(0,d.jsx)(p,{}),!n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(v,{title:e("title")}),(0,d.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-4",children:s.map((function(a,n){return(0,d.jsx)(D,{character:a,useLabel:e("more_info")},n)}))})]})]})}),U=function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(N,{}),(0,d.jsx)("div",{className:"container-md",children:(0,d.jsxs)(t.Z5,{children:[(0,d.jsx)(t.AW,{path:c,element:(0,d.jsx)(H,{})}),(0,d.jsx)(t.AW,{path:r,element:(0,d.jsx)(E,{})}),(0,d.jsx)(t.AW,{path:i,element:(0,d.jsx)(b,{})}),(0,d.jsx)(t.AW,{path:s,element:(0,d.jsx)(z,{})}),(0,d.jsx)(t.AW,{path:l,element:(0,d.jsx)(q,{})})]})}),(0,d.jsx)(u,{})]})}}}]);
//# sourceMappingURL=213.978cefcc.chunk.js.map